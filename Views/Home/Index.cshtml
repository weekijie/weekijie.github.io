@model Portfolio.Models.PortfolioViewModel
@{
    ViewData["Title"] = "Home";
}

<!-- Hero Section -->
<section class="hero" id="about">
    <div class="hero-content">
        <div class="hero-text">
            <h1 class="greeting">hi👋</h1>
            <p class="intro">
                @if (!string.IsNullOrEmpty(Model.Profile.Bio))
                {
                    @Model.Profile.Bio
                }
                else
                {
                    <text>Software developer passionate about building modern web applications.</text>
                }
            </p>
            <div class="hero-actions">
                @if (!string.IsNullOrEmpty(Model.Profile.ResumeUrl))
                {
                    <a href="@Model.Profile.ResumeUrl" class="btn btn-primary" target="_blank">
                        <i class="fas fa-file-alt"></i> Resume
                    </a>
                }
                <div class="social-links">
                    @if (!string.IsNullOrEmpty(Model.Profile.LinkedIn))
                    {
                        <a href="@Model.Profile.LinkedIn" target="_blank" rel="noopener" class="social-link"
                            aria-label="LinkedIn">
                            <i class="fab fa-linkedin"></i>
                        </a>
                    }
                    <a href="@Model.GitHubProfile.HtmlUrl" target="_blank" rel="noopener" class="social-link"
                        aria-label="GitHub">
                        <i class="fab fa-github"></i>
                    </a>
                    @if (!string.IsNullOrEmpty(Model.Profile.Email))
                    {
                        <a href="mailto:@Model.Profile.Email" class="social-link" aria-label="Email">
                            <i class="fas fa-envelope"></i>
                        </a>
                    }
                </div>
            </div>
        </div>
        <div class="hero-image">
            <img src="@Model.GitHubProfile.AvatarUrl" alt="Profile photo" class="profile-photo" />
        </div>
    </div>
</section>

<!-- Experience Section -->
<section class="section" id="experience">
    <div class="section-header">
        <h2 class="section-title">experience</h2>
        <div class="tabs">
            <button class="tab active" data-tab="work">Work</button>
            <button class="tab" data-tab="education">Education</button>
        </div>
    </div>

    <!-- Work Tab -->
    <div class="tab-content active" id="work-content">
        @foreach (var job in Model.Profile.Experience)
        {
            <div class="experience-card">
                <div class="experience-header">
                    <div class="company-logo">
                        @if (!string.IsNullOrEmpty(job.IconUrl))
                        {
                            <img src="@job.IconUrl" alt="@job.Company" class="logo-image" loading="lazy" />
                        }
                        else
                        {
                            <span class="logo-letter">@job.Company[0]</span>
                        }
                    </div>
                    <div class="experience-info">
                        <h3 class="experience-title">@job.Title</h3>
                        <a href="@job.CompanyUrl" target="_blank" rel="noopener" class="company-name">@job.Company</a>
                        <div class="experience-meta">
                            <span class="period">@job.Period</span>
                            @if (!string.IsNullOrEmpty(job.Type))
                            {
                                <span class="type-badge">@job.Type</span>
                            }
                        </div>
                    </div>
                </div>
                <ul class="experience-description">
                    @foreach (var point in job.Description)
                    {
                        <li>@point</li>
                    }
                </ul>
            </div>
        }
    </div>

    <!-- Education Tab -->
    <div class="tab-content" id="education-content">
        @foreach (var edu in Model.Profile.Education)
        {
            <div class="experience-card">
                <div class="experience-header">
                    <div class="company-logo">
                        @if (!string.IsNullOrEmpty(edu.IconUrl))
                        {
                            <img src="@edu.IconUrl" alt="@edu.Institution" class="logo-image" loading="lazy" />
                        }
                        else
                        {
                            <span class="logo-letter">@edu.Institution[0]</span>
                        }
                    </div>
                    <div class="experience-info">
                        <h3 class="experience-title">@edu.Degree</h3>
                        <a href="@edu.InstitutionUrl" target="_blank" rel="noopener"
                            class="company-name">@edu.Institution</a>
                        <div class="experience-meta">
                            <span class="period">@edu.Year</span>
                        </div>
                    </div>
                </div>
                @if (!string.IsNullOrEmpty(edu.Description))
                {
                    <p class="education-description">@edu.Description</p>
                }
            </div>
        }
    </div>
</section>

<!-- Certifications Section -->
@if (Model.Profile.Certifications.Any())
{
    <section class="section" id="certifications">
        <h2 class="section-title">licenses & certifications</h2>
        <div class="certifications-grid">
            @foreach (var cert in Model.Profile.Certifications)
            {
                <div class="certification-card">
                    <div class="cert-icon">
                        @if (!string.IsNullOrEmpty(cert.IconUrl))
                        {
                            <img src="@cert.IconUrl" alt="@cert.Issuer" class="logo-image" loading="lazy" />
                        }
                        else
                        {
                            <i class="fas fa-certificate"></i>
                        }
                    </div>
                    <div class="cert-info">
                        <h3 class="cert-name">@cert.Name</h3>
                        <p class="cert-issuer">@cert.Issuer</p>
                        <span class="cert-date">Issued @cert.IssueDate</span>
                    </div>
                    @if (!string.IsNullOrEmpty(cert.CredentialUrl))
                    {
                        <a href="@cert.CredentialUrl" target="_blank" rel="noopener" class="cert-link">
                            <i class="fas fa-external-link-alt"></i>
                        </a>
                    }
                </div>
            }
        </div>
    </section>
}

<!-- Projects Section -->
<section class="section" id="projects">
    <div class="section-header">
        <h2 class="section-title">featured projects</h2>
        <a href="https://github.com/weekijie?tab=repositories" target="_blank" rel="noopener" class="view-more">
            view more <i class="fas fa-arrow-right"></i>
        </a>
    </div>

    <div class="projects-grid">
        @foreach (var repo in Model.Repositories)
        {
            <div class="project-card">
                <div class="project-header">
                    <h3 class="project-name">@repo.Name</h3>
                    <div class="project-links">
                        @if (!string.IsNullOrEmpty(repo.HomepageUrl))
                        {
                            <a href="@repo.HomepageUrl" target="_blank" rel="noopener" class="demo-link" title="Live Demo"
                                onclick="event.stopPropagation();">
                                <i class="fas fa-external-link-alt"></i>
                            </a>
                        }
                        <a href="@repo.HtmlUrl" target="_blank" rel="noopener" class="github-link" title="View on GitHub">
                            <i class="fab fa-github"></i>
                        </a>
                    </div>
                </div>
                <a href="@repo.HtmlUrl" target="_blank" rel="noopener" class="project-card-body">
                    <p class="project-description">
                        @(string.IsNullOrEmpty(repo.Description) ? "No description provided" : repo.Description)
                    </p>
                    <div class="project-footer">
                        <div class="project-stats">
                            @if (repo.StargazersCount > 0)
                            {
                                <span class="stat"><i class="fas fa-star"></i> @repo.StargazersCount</span>
                            }
                            @if (repo.ForksCount > 0)
                            {
                                <span class="stat"><i class="fas fa-code-branch"></i> @repo.ForksCount</span>
                            }
                        </div>
                        <div class="project-tags">
                            @if (!string.IsNullOrEmpty(repo.Language) && repo.Language != "Unknown")
                            {
                                <span class="tag language-tag">@repo.Language</span>
                            }
                            @foreach (var topic in repo.Topics.Take(2))
                            {
                                <span class="tag">@topic</span>
                            }
                        </div>
                    </div>
                </a>
            </div>
        }
    </div>
</section>

<!-- Competitions Section -->
@if (Model.Profile.Competitions.Any())
{
    <section class="section" id="competitions">
        <h2 class="section-title">hackathons & competitions</h2>
        <div class="competitions-grid">
            @foreach (var comp in Model.Profile.Competitions)
            {
                <div class="competition-card">
                    <div class="competition-header">
                        <div class="comp-icon-wrapper">
                            @if (!string.IsNullOrEmpty(comp.IconUrl))
                            {
                                <img src="@comp.IconUrl" alt="@comp.Organizer" class="logo-image" loading="lazy" />
                            }
                            else
                            {
                                <div class="comp-icon-placeholder">
                                    <i class="fas fa-trophy"></i>
                                </div>
                            }
                        </div>
                        <div class="comp-header-info">
                            <h3 class="comp-name">@comp.Name</h3>
                            <div class="comp-organizer">@comp.Organizer</div>
                        </div>
                        @if (!string.IsNullOrEmpty(comp.CredentialUrl))
                        {
                            <a href="@comp.CredentialUrl" target="_blank" rel="noopener" class="comp-link" title="View Credential">
                                <i class="fas fa-external-link-alt"></i>
                            </a>
                        }
                    </div>

                    <div class="comp-meta">
                        <span class="award-badge"><i class="fas fa-medal"></i> @comp.Award</span>
                        <span class="comp-date">@comp.Date</span>
                    </div>

                    <p class="comp-description">@comp.Description</p>

                    @if (!string.IsNullOrEmpty(comp.ProposalUrl))
                    {
                        <details class="comp-proposal">
                            <summary class="proposal-toggle">
                                <i class="fas fa-file-pdf"></i> View Proposal / Document
                            </summary>
                            <div class="proposal-content">
                                <div class="proposal-actions"
                                    style="padding: 0.5rem; text-align: right; background: var(--bg-secondary); border-bottom: 1px solid var(--border);">
                                    <a href="@comp.ProposalUrl" target="_blank" rel="noopener"
                                        style="font-size: 0.9rem; color: var(--accent); text-decoration: none;">
                                        <i class="fas fa-external-link-alt"></i> Open in new tab
                                    </a>
                                </div>
                                <iframe src="@comp.ProposalUrl" class="proposal-frame" title="Proposal Document" loading="lazy">
                                    Your browser does not support inline PDFs. <a href="@comp.ProposalUrl" target="_blank">Download
                                        PDF</a>
                                </iframe>
                            </div>
                        </details>
                    }

                    @if (!string.IsNullOrEmpty(comp.ImageUrl))
                    {
                        <div class="comp-image-container">
                            <img src="@comp.ImageUrl" alt="@comp.Name" class="comp-featured-image" loading="lazy" />
                        </div>
                    }
                </div>
            }
        </div>
    </section>
}

<!-- Skills Section -->
@if (Model.Profile.Skills.Any())
{
    <section class="section" id="skills">
        <h2 class="section-title">skills</h2>
        <div class="skills-container">
            @foreach (var skill in Model.Profile.Skills)
            {
                <span class="skill-tag">@skill</span>
            }
        </div>
    </section>
}

<!-- Contact Section -->
<section class="section" id="contact">
    <h2 class="section-title">get in touch</h2>
    <div class="contact-container">
        <p class="contact-intro">
            Have a question or want to work together? Feel free to reach out!
        </p>
        <form id="contactForm" class="contact-form">
            <div class="form-group">
                <label for="from_name">Name</label>
                <input type="text" id="from_name" name="from_name" required placeholder="Your name" />
            </div>
            <div class="form-group">
                <label for="reply_to">Email</label>
                <input type="email" id="reply_to" name="reply_to" required placeholder="your@email.com" />
            </div>
            <div class="form-group">
                <label for="message">Message</label>
                <textarea id="message" name="message" rows="5" required placeholder="Your message..."></textarea>
            </div>
            <button type="submit" class="btn btn-primary btn-submit">
                <span class="btn-text"><i class="fas fa-paper-plane"></i> Send Message</span>
                <span class="btn-loading" style="display: none;"><i class="fas fa-spinner fa-spin"></i>
                    Sending...</span>
            </button>
            <div id="formStatus" class="form-status"></div>
        </form>
    </div>
</section>